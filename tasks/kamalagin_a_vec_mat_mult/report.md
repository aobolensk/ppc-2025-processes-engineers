# Умножение матрицы на вектор (ленточная горизонтальная схема)
- Студент: Камалагин Артём Аркадьевич, группа 3823Б1ПР3
- Технологии: SEQ | MPI
- Вариант: 11

## 1. Введение
В этой работе реализованы последовательная версия и параллельная версия умножения матрицы на векторс использованием ленточной горизонтальной схемы распределения данных и технологии MPI.
А также проведена проверка корректности с помощью функциональных тестов + оценка производительности с помощью cоответствующих тестов

## 2. Постановка задачи
Дана матрица A размера M × N и вектор x длины N. Требуется вычислить результирующий вектор y длины M,
определяемый следующим образом:
y[i] = Σ_{j=0}^{N-1} A[i][j] · x[j],  i = 0..M-1
Вход:
- Матрица A размера M × N
- Вектор x длины N
Выход:
- Вектор y длины M — результат умножения матрицы на вектор
Ограничения:
- Размеры матрицы и вектора могут быть произвольными и достаточно большими
- Алгоритм должен корректно обрабатывать граничные случаи, включая нулевые размеры входных данных.

## 3. Базовый алгоритм
Последовательный алгоритм умножения матрицы на вектор заключается в последовательном вычислении каждого элемента результирующего вектора.

Для каждой строки матрицы A вычисляется скалярное произведение со входным вектором x.
Полученное значение сохраняется в соответствующей позиции выходного вектора y.

## 4. Схема распараллеливания
Процесс с рангом 0 выполняет роль корневого процесса и отвечает за инициализацию входных данных и сбор итогового результата.
Матрица A разбивается на группы строк (горизонтальные ленты), которые распределяются между процессами.
Каждый процесс получает набор строк матрицы, а входной вектор x передаётся всем процессам.

После получения данных каждый процесс независимо вычисляет соответствующую часть вектора y для принадлежащих ему строк матрицы.
Локальные результаты передаются корневому процессу, где формируется итоговый результирующий вектор.

## 5. Детали реализации
Реализация задачи разделена на последовательную и параллельную версии, расположенные в соответствующих поддиректориях проекта.

Последовательная версия выполняет умножение матрицы на вектор в одном процессе путём последовательного обхода строк матрицы и вычисления скалярного произведения каждой строки с входным вектором.

Параллельная версия реализована с использованием MPI и ленточной горизонтальной схемы. Каждый процесс обрабатывает собственный набор строк матрицы и вычисляет соответствующую часть результирующего вектора.
Входной вектор передаётся всем процессам перед началом вычислений.

В реализации предусмотрена корректная обработка граничных случаев, включая ситуации с нулевыми размерами матрицы или вектора.
Дополнительная динамическая память используется только для хранения локальных фрагментов данных.

## 6. Экспериментальная установка
Аппаратная и программная конфигурация:
- Процессор: 12th Gen Intel(R) Core(TM) i5-12400F, 2.50 GHz
- Архитектура: x86-64
- Операционная система: Windows 11
- Компилятор: MSVC
- Режим сборки: Release
Для запуска параллельной версии использовалась библиотека MPI.
Количество процессов задавалось при запуске программы.
Входные данные для тестов генерировались автоматически в рамках функциональных и производительных тестов проекта.

## 7. Результаты и обсуждение
### Фунциональные тесты:
Всего было выполнено 16 тестов из 2 наборов.
Все применимые тесты успешно пройдены.
### Перфоманс тесты:
task run mode:

| Количество процессов | Время (seq), с | Время (mpi), с | Ускорение | Эффективность |
|----------------------|----------------|----------------|-----------|---------------|
| 1                    | 0.00050526     | 0.00079880     | 0.63      | 63.0%         |
| 2                    | 0.00059870     | 0.00052204     | 1.15      | 57.5%         |
| 4                    | 0.00053856     | 0.00037724     | 1.43      | 35.8%         |
| 8                    | 0.00067838     | 0.00030214     | 2.24      | 28.0%         |

Ускорение вычислялось как отношение времени выполнения последовательной версии к времени выполнения параллельной версии.
Эффективность определялась как отношение ускорения к количеству процессов, умноженное на 100%.

Полученные результаты показывают, что использование параллельной версии алгоритма позволяет сократить время выполнения
при увеличении количества процессов.

## 8. Заключение
В ходе выполнения лабораторной работы были реализованы последовательная и параллельная версии алгоритма умножения матрицы на вектор
с использованием ленточной горизонтальной схемы и технологии MPI.

Корректность реализации подтверждена результатами функциональных тестов.
Проведённые измерения производительности показали, что параллельная версия позволяет сократить время выполнения при увеличении количества процессов,однако эффективность масштабирования ограничена
накладными расходами на передачу данных между процессами.

Поставленные в работе задачи были успешно выполнены.

## 9. Источники
1. Материалы курса: <https://learning-process.github.io/parallel_programming_course/ru/common_information/report.html>.
2. Документация C++ Standard Library:https://en.cppreference.com/
3. Документация MS-MPI: https://www.mpi-forum.org/
4. Сысоев А. В. *Лекции по параллельному программированию*.
